// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model EventScheduler {
  name String
  id Int @id @default(autoincrement())
  latX Float
  latY Float
  travelTime Float
  duration Float
  doneScheduling Boolean
  priority Int
  lastScheduled DateTime
}

model Event {
  id Int @id @default(autoincrement())
  start DateTime
  end DateTime
  userId Int
  schedulerId Int
  user User @relation(fields: [userId], references: [id])
  scheduler EventScheduler @relation(fields: [schedulerId], references: [id])
  kind String
  complete Boolean
}

model User {
  email String @unique
  password String @unique
  id Int @id @default(autoincrement())
  ScheduledEventScheduler EventScheduler[] @relation(fields: [userId], references: [id])
  DueDateEventScheduler EventScheduler[]
  UnscheduledEventScheduler EventScheduler[]
  events Event
  activeHours ActiveHours
  procrastinationIndex Int
}

model ActiveHours {
  startMonday DateTime
  endMonday DateTime
  startTuesday DateTime
  endTuesday DateTime
  startWednesday DateTime
  endWednesday DateTime
  startThursday DateTime
  endThursday DateTime
  startFriday DateTime
  endFriday DateTime
  startSaturday DateTime
  endSaturday DateTime  
  startSunday DateTime
  endSunday DateTime
}

model ScheduledEventScheduler {
  repeatInfo RepeatInfo
  startDateTime DateTime
  endDateTime DateTime
}

model DueDateEventScheduler {
  dueDateTime DateTime
  blockSize DateTime
  amountScheduled DateTime
}

model UnscheduledEventScheduler {
  repeatInfo RepeatInfo
}

model RepeatInfo {
  repeatType RepeatType
  days Int[]
}

enum RepeatType {
  DAY
  MONTH
  YEAR
}